<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>GTimeZoneMonitor</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="GIO Reference Manual">
<link rel="up" href="file_mon.html" title="File System Monitoring">
<link rel="prev" href="GFileMonitor.html" title="GFileMonitor">
<link rel="next" href="utils.html" title="File-related Utilities">
<meta name="generator" content="GTK-Doc V1.17 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="GFileMonitor.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="file_mon.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GIO Reference Manual</th>
<td><a accesskey="n" href="utils.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#GTimeZoneMonitor.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#GTimeZoneMonitor.description" class="shortcut">Description</a>
                   | 
                  <a href="#GTimeZoneMonitor.object-hierarchy" class="shortcut">Object Hierarchy</a>
                   | 
                  <a href="#GTimeZoneMonitor.signals" class="shortcut">Signals</a>
</td></tr>
</table>
<div class="refentry">
<a name="GTimeZoneMonitor"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="GTimeZoneMonitor.top_of_page"></a>GTimeZoneMonitor</span></h2>
<p>GTimeZoneMonitor — Monitor the local timezone</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="GTimeZoneMonitor.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">                    <a class="link" href="GTimeZoneMonitor.html#GTimeZoneMonitor-struct" title="GTimeZoneMonitor">GTimeZoneMonitor</a>;
<a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="returnvalue">GTimeZoneMonitor</span></a> *       <a class="link" href="GTimeZoneMonitor.html#g-time-zone-monitor-get" title="g_time_zone_monitor_get ()">g_time_zone_monitor_get</a>        (<em class="parameter"><code><span class="type">void</span></code></em>);
</pre>
</div>
<div class="refsect1">
<a name="GTimeZoneMonitor.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  <a href="./../gobject/gobject/gobject-The-Base-Object-Type.html#GObject">GObject</a>
   +----GTimeZoneMonitor
</pre>
</div>
<div class="refsect1">
<a name="GTimeZoneMonitor.signals"></a><h2>Signals</h2>
<pre class="synopsis">
  "<a class="link" href="GTimeZoneMonitor.html#GTimeZoneMonitor-changed" title='The "changed" signal'>changed</a>"                                        : <a href="./../gobject/gobject/gobject-Signals.html#G-SIGNAL-RUN-FIRST:CAPS"><code class="literal">Run First</code></a>
</pre>
</div>
<div class="refsect1">
<a name="GTimeZoneMonitor.description"></a><h2>Description</h2>
<p>
<a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="type">GTimeZoneMonitor</span></a> is a utility class to monitor the local timezone for
changes (ie: in response to the user manually changing the timezone
to that of a different locale).
</p>
<p>
You must use this class in order for your program to notice changes
to the local timezone.  It works by monitoring the /etc/localtime
file.  When the timezone is found to have changed,
<a href="./../glib/glib/glib-GTimeZone.html#g-time-zone-refresh-local"><code class="function">g_time_zone_refresh_local()</code></a> is called and the "changed" signal is
emitted on the <a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="type">GTimeZoneMonitor</span></a> (in that order).
</p>
<p>
Windows support is not presently working.
</p>
</div>
<div class="refsect1">
<a name="GTimeZoneMonitor.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="GTimeZoneMonitor-struct"></a><h3>GTimeZoneMonitor</h3>
<pre class="programlisting">typedef struct _GTimeZoneMonitor GTimeZoneMonitor;</pre>
<p>
This is an opaque structure type.
</p>
</div>
<hr>
<div class="refsect2">
<a name="g-time-zone-monitor-get"></a><h3>g_time_zone_monitor_get ()</h3>
<pre class="programlisting"><a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="returnvalue">GTimeZoneMonitor</span></a> *       g_time_zone_monitor_get        (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>
Gets the singleton instance of the <a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="type">GTimeZoneMonitor</span></a> class, creating
it if required.
</p>
<p>
You should call <a href="./../gobject/gobject/gobject-The-Base-Object-Type.html#g-object-unref"><code class="function">g_object_unref()</code></a> on the result when you no longer
need it.  Be aware, though, that this will not destroy the instance,
so if you connected to the changed signal, you are required to
disconnect from it for yourself.
</p>
<p>
There is only one instance of <a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="type">GTimeZoneMonitor</span></a> and it dispatches its
signals via the default <a href="./../glib/glib/glib-The-Main-Event-Loop.html#GMainContext"><span class="type">GMainContext</span></a>.  There is no way to create an
instance that will dispatch signals using a different context.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a reference to the <a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="type">GTimeZoneMonitor</span></a>.</td>
</tr></tbody>
</table></div>
</div>
</div>
<div class="refsect1">
<a name="GTimeZoneMonitor.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="GTimeZoneMonitor-changed"></a><h3>The <code class="literal">"changed"</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                user_function                      (<a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="type">GTimeZoneMonitor</span></a> *monitor,
                                                        <a href="./../glib/glib/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a>          user_data)      : <a href="./../gobject/gobject/gobject-Signals.html#G-SIGNAL-RUN-FIRST:CAPS"><code class="literal">Run First</code></a></pre>
<p>
Indicates that the local timezone has changed.
</p>
<p>
The <a href="./../glib/glib/glib-GTimeZone.html#g-time-zone-refresh-local"><code class="function">g_time_zone_refresh_local()</code></a> function is called just before this
signal is emitted, so any new <a href="./../glib/glib/glib-GTimeZone.html#GTimeZone"><span class="type">GTimeZone</span></a> or <a href="./../glib/glib/glib-GDateTime.html#GDateTime"><span class="type">GDateTime</span></a> instances
created from signal handlers will be as per the new timezone.
</p>
<p>
Note that this signal is not emitted in response to entering or
exiting daylight savings time within a given timezone.  It's only
for when the user has changed the timezone to that of a different
location.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>monitor</code></em> :</span></p></td>
<td>the <a class="link" href="GTimeZoneMonitor.html" title="GTimeZoneMonitor"><span class="type">GTimeZoneMonitor</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.17</div>
</body>
</html>